{
  "name": "create_ecommerce_order",
  "description": "Create a new order in the e-commerce system on behalf of a customer via WhatsApp. Use this when a customer wants to place an order through WhatsApp chat. Only available when e-commerce integration is enabled and order creation feature is active.",
  "strict": true,
  "parameters": {
    "type": "object",
    "required": ["customer_phone", "items", "payment_method", "address", "delivery_option", "delivery_date", "notes"],
    "additionalProperties": false,
    "properties": {
      "customer_phone": {
        "type": "string",
        "description": "Customer's phone number. The customer must have an existing account in the e-commerce system. Use the phone number from the current WhatsApp conversation."
      },
      "items": {
        "type": "array",
        "description": "Array of items to order. Each item must have a product_id and quantity.",
        "items": {
          "type": "object",
          "required": ["product_id", "quantity"],
          "additionalProperties": false,
          "properties": {
            "product_id": {
              "type": "string",
              "description": "The product ID from the e-commerce catalog. Use search_ecommerce_products first to find valid product IDs."
            },
            "quantity": {
              "type": "integer",
              "description": "Number of units to order. Must be at least 1."
            }
          }
        }
      },
      "payment_method": {
        "type": ["string", "null"],
        "description": "Payment method selected by customer. Options: 'cash', 'credit_card', 'paypal', 'bank_transfer'. Default is 'cash' if null.",
        "enum": ["cash", "credit_card", "paypal", "bank_transfer", null]
      },
      "address": {
        "type": ["string", "null"],
        "description": "Delivery address if delivery_option is 'delivery'. Include street, neighborhood, and any delivery references. Can be null for pickup orders."
      },
      "delivery_option": {
        "type": ["string", "null"],
        "description": "How the customer wants to receive their order. Options: 'pickup' or 'delivery'. Default is 'delivery' if null.",
        "enum": ["pickup", "delivery", null]
      },
      "delivery_date": {
        "type": ["string", "null"],
        "description": "Requested delivery date in ISO format (YYYY-MM-DD). If null, earliest available date will be used."
      },
      "notes": {
        "type": ["string", "null"],
        "description": "Additional notes or special instructions for the order. Can be null if no special instructions."
      }
    }
  }
}
