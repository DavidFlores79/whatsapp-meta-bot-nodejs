<div class="flex mb-2"
    [ngClass]="{'justify-end': message.sender === 'me', 'justify-start': message.sender === 'other'}">
    <div class="max-w-[65%] rounded-lg p-2 relative shadow-sm text-sm"
        [ngClass]="{'bg-outgoing-message text-white rounded-tr-none': message.sender === 'me', 'bg-whatsapp-gray text-gray-100 rounded-tl-none': message.sender === 'other'}">

        <p class="mb-1 break-words">{{ message.text }}</p>

        <div class="flex justify-end items-center gap-1">
            <span class="text-[10px] text-gray-400 min-w-fit">
                {{ message.timestamp | date:'shortTime' }}
            </span>
            <span *ngIf="message.sender === 'me'" class="text-blue-400 text-[10px]">
                <i class="fas fa-check-double"></i>
            </span>
        </div>

        <!-- Tail SVG (Optional polish) -->
        <div *ngIf="message.sender === 'me'" class="absolute top-0 -right-2 w-2 h-2 overflow-hidden">
            <div class="w-3 h-3 bg-outgoing-message rotate-45 transform origin-bottom-left"></div>
        </div>
        <div *ngIf="message.sender === 'other'" class="absolute top-0 -left-2 w-2 h-2 overflow-hidden">
            <div class="w-3 h-3 bg-whatsapp-gray rotate-45 transform origin-bottom-right"></div>
        </div>
    </div>
</div>